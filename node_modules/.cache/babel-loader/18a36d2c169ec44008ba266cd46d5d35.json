{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/LENOVO/Downloads/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/LENOVO/Downloads/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _styled from\"styled-components\";import React,{useEffect}from'react';import{useNavigate}from'react-router-dom';import NavbarComp from'../Navbar/NavbarComp';import{createAxios}from'../../Hooks/UseAxios';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Container=_styled.section.withConfig({displayName:\"AdminDashboard__Container\",componentId:\"sc-1sbaluq-0\"})([\"height:90vh;box-sizing:border-box;display:flex;justify-content:center;img{width:90%;}@media (max-width:500px){align-items:center;img{max-width:380px;}}\"]);var Footer=_styled.footer.withConfig({displayName:\"AdminDashboard__Footer\",componentId:\"sc-1sbaluq-1\"})([\"background-color:#212529;height:3.6vh;\"]);function AdminDashboard(){var navigate=useNavigate();//check user role\nvar user=localStorage.getItem('user');var parsedUser=JSON.parse(user);console.log(parsedUser);var role=parsedUser===null||parsedUser===void 0?void 0:parsedUser.roles[0];//console.log(role)\nuseEffect(function(){if(!user||role!=='ROLE_ADMIN'){navigate('/');}},[role]);var fetchAdminData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var accessToken,apiUrl,authAxios,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:accessToken=parsedUser.accessToken;//console.log(accessToken)\n//const apiUrl = 'http://localhost:8081'\napiUrl='https://movieapp-danish.azurewebsites.net';authAxios=createAxios(apiUrl,accessToken);_context.next=5;return authAxios.get('/forAdmin');case 5:data=_context.sent;case 6:case\"end\":return _context.stop();}}},_callee);}));return function fetchAdminData(){return _ref.apply(this,arguments);};}();useEffect(function(){if(user&&role==='ROLE_ADMIN')fetchAdminData();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NavbarComp,{}),/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(\"img\",{src:\"admindashboard.png\",alt:\"logo\"})}),/*#__PURE__*/_jsx(Footer,{})]});}export default AdminDashboard;","map":{"version":3,"names":["React","useEffect","useNavigate","NavbarComp","createAxios","Container","styled","section","Footer","footer","AdminDashboard","navigate","user","localStorage","getItem","parsedUser","JSON","parse","console","log","role","roles","fetchAdminData","accessToken","apiUrl","authAxios","get","data"],"sources":["C:/Users/LENOVO/Downloads/frontend/src/Components/Admin/AdminDashboard.js"],"sourcesContent":["import React, { useEffect } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport NavbarComp from '../Navbar/NavbarComp'\r\nimport { createAxios } from '../../Hooks/UseAxios'\r\nimport styled from 'styled-components/macro'\r\n\r\nconst Container = styled.section`\r\n  /* border: 1px solid olive; */\r\n  /* max-width: 1000px; */\r\n  /* margin: 0 auto; */\r\n  height: 90vh;\r\n  box-sizing: border-box;\r\n  /* background: rgb(248, 249, 255); */\r\n  display: flex;\r\n  justify-content: center;\r\n\r\n  img {\r\n    width: 90%;\r\n    /* max-width: 1100px; */\r\n  }\r\n\r\n  @media (max-width: 500px) {\r\n    align-items: center;\r\n    img {\r\n      max-width: 380px;\r\n      /* max-height: 50%; */\r\n    }\r\n  }\r\n`\r\n\r\nconst Footer = styled.footer`\r\n  background-color: #212529;\r\n  height: 3.6vh;\r\n`\r\n\r\nfunction AdminDashboard() {\r\n  const navigate = useNavigate()\r\n\r\n  //check user role\r\n  const user = localStorage.getItem('user')\r\n  const parsedUser = JSON.parse(user)\r\n  console.log(parsedUser)\r\n  const role = parsedUser?.roles[0]\r\n  //console.log(role)\r\n  useEffect(() => {\r\n    if (!user || role !== 'ROLE_ADMIN') {\r\n      navigate('/')\r\n    }\r\n  }, [role])\r\n\r\n  const fetchAdminData = async () => {\r\n    const accessToken = parsedUser.accessToken\r\n    //console.log(accessToken)\r\n    //const apiUrl = 'http://localhost:8081'\r\n    const apiUrl = 'https://movieapp-danish.azurewebsites.net'\r\n    const authAxios = createAxios(apiUrl, accessToken)\r\n\r\n    const data = await authAxios.get('/forAdmin')\r\n    \r\n    //console.log(data)\r\n  }\r\n  useEffect(() => {\r\n    if (user && role === 'ROLE_ADMIN') fetchAdminData()\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n      <NavbarComp />\r\n      <Container>\r\n        <img src='admindashboard.png' alt='logo' />\r\n      </Container>\r\n      <Footer></Footer>\r\n    </>\r\n  )\r\n}\r\nexport default AdminDashboard\r\n"],"mappings":"uSAAA,MAAOA,MAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,WAAP,KAAuB,sBAAvB,CACA,OAASC,WAAT,KAA4B,sBAA5B,C,6IAGA,GAAMC,UAAS,CAAGC,OAAM,CAACC,OAAV,8OAAf,CAwBA,GAAMC,OAAM,CAAGF,OAAM,CAACG,MAAV,0HAAZ,CAKA,QAASC,eAAT,EAA0B,CACxB,GAAMC,SAAQ,CAAGT,WAAW,EAA5B,CAEA;AACA,GAAMU,KAAI,CAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAb,CACA,GAAMC,WAAU,CAAGC,IAAI,CAACC,KAAL,CAAWL,IAAX,CAAnB,CACAM,OAAO,CAACC,GAAR,CAAYJ,UAAZ,EACA,GAAMK,KAAI,CAAGL,UAAH,SAAGA,UAAH,iBAAGA,UAAU,CAAEM,KAAZ,CAAkB,CAAlB,CAAb,CACA;AACApB,SAAS,CAAC,UAAM,CACd,GAAI,CAACW,IAAD,EAASQ,IAAI,GAAK,YAAtB,CAAoC,CAClCT,QAAQ,CAAC,GAAD,CAAR,CACD,CACF,CAJQ,CAIN,CAACS,IAAD,CAJM,CAAT,CAMA,GAAME,eAAc,4FAAG,2KACfC,WADe,CACDR,UAAU,CAACQ,WADV,CAErB;AACA;AACMC,MAJe,CAIN,2CAJM,CAKfC,SALe,CAKHrB,WAAW,CAACoB,MAAD,CAASD,WAAT,CALR,uBAOFE,UAAS,CAACC,GAAV,CAAc,WAAd,CAPE,QAOfC,IAPe,qEAAH,kBAAdL,eAAc,0CAApB,CAWArB,SAAS,CAAC,UAAM,CACd,GAAIW,IAAI,EAAIQ,IAAI,GAAK,YAArB,CAAmCE,cAAc,GAClD,CAFQ,CAEN,EAFM,CAAT,CAIA,mBACE,wCACE,KAAC,UAAD,IADF,cAEE,KAAC,SAAD,wBACE,YAAK,GAAG,CAAC,oBAAT,CAA8B,GAAG,CAAC,MAAlC,EADF,EAFF,cAKE,KAAC,MAAD,IALF,GADF,CASD,CACD,cAAeZ,eAAf"},"metadata":{},"sourceType":"module"}