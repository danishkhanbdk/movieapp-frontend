{"ast":null,"code":"import _defineProperty from\"C:/Users/LENOVO/Downloads/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/LENOVO/Downloads/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/LENOVO/Downloads/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _styled from\"styled-components\";import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import NavbarComp from'../Navbar/NavbarComp';import{createAxios,getTokenFromLocalStorage}from'../../Hooks/UseAxios';import Table from'react-bootstrap/Table';import'react-pro-sidebar/dist/css/styles.css';import Form from'react-bootstrap/Form';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ErrorBox=_styled.div.withConfig({displayName:\"AddMovieForm__ErrorBox\",componentId:\"sc-1b4vsj0-0\"})([\"height:30px;margin:1rem 0;color:red;width:100%;padding:2px 0;text-align:center;\"]);var Container=_styled.section.withConfig({displayName:\"AddMovieForm__Container\",componentId:\"sc-1b4vsj0-1\"})([\"max-width:1000px;margin:0 auto;box-sizing:border-box;margin-top:5rem;min-height:82vh;\"]);var Footer=_styled.footer.withConfig({displayName:\"AddMovieForm__Footer\",componentId:\"sc-1b4vsj0-2\"})([\"background-color:#212529;height:3.6vh;\"]);export default function AddMovieForm(){var navigate=useNavigate();var token=getTokenFromLocalStorage();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];//check user role\nvar user=localStorage.getItem('user');var parsedUser=JSON.parse(user);var userRole=parsedUser===null||parsedUser===void 0?void 0:parsedUser.roles[0];useEffect(function(){if(!user||userRole!=='ROLE_ADMIN'){navigate('/');}},[userRole]);var _useState5=useState({movieName:'',theatreName:'',noOfTicketsAvailable:0,ticketsStatus:''}),_useState6=_slicedToArray(_useState5,2),movie=_useState6[0],setMovie=_useState6[1];// const handleChange = (e) => {\n//   const {movieName, value} = e.target;\n//   setMovie((prevMovie) => ({...prevMovie, [movieName]: value}));\n// };\n// const onChange = (e) => {\n//   const {movieName, value} = e.target;\n//   setError(false)\n//   setMovie((prevMovie) => ({\n//     ...prevMovie,\n//     [movieName]: value,\n//   }))\n// };\nvar onChange=function onChange(e){setError(false);setMovie(function(prevMovie){return _objectSpread(_objectSpread({},prevMovie),{},_defineProperty({},e.target.id,e.target.value));});};var handleSubmit=function handleSubmit(e){e.preventDefault();axios.post('https://movieapp-danish.azurewebsites.net/savemovie',movie).then(function(response){console.log(response.data);alert(\"Movie Added!!!\");}).catch(function(error){console.log(error);});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NavbarComp,{}),/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mt-5\",children:\"Add Movie\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"row g-3 mt-5\",noValidate:true,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"movieName\",className:\"form-label\",children:\"Movie Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"movieName\",onChange:onChange,required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"valid-feedback\",children:\"Looks good!\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"theatreName\",className:\"form-label\",children:\"Theatre Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"theatreName\",onChange:onChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"noOfTicketsAvailable\",className:\"form-label\",children:\"Number Of Tickets Available\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"noOfTicketsAvailable\",onChange:onChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"ticketsStatus\",className:\"form-label\",children:\"Tickets Status\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"ticketsStatus\",onChange:onChange,required:true})]}),/*#__PURE__*/_jsx(ErrorBox,{children:error&&errorMessage}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",onClick:handleSubmit,children:\"Add Movie\"})})]})]}),/*#__PURE__*/_jsx(Footer,{})]});}","map":{"version":3,"names":["React","useEffect","useState","useNavigate","NavbarComp","createAxios","getTokenFromLocalStorage","Table","Form","axios","ErrorBox","styled","div","Container","section","Footer","footer","AddMovieForm","navigate","token","error","setError","errorMessage","setErrorMessage","user","localStorage","getItem","parsedUser","JSON","parse","userRole","roles","movieName","theatreName","noOfTicketsAvailable","ticketsStatus","movie","setMovie","onChange","e","prevMovie","target","id","value","handleSubmit","preventDefault","post","then","response","console","log","data","alert","catch"],"sources":["C:/Users/LENOVO/Downloads/frontend/src/Components/Admin/AddMovieForm.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport NavbarComp from '../Navbar/NavbarComp'\r\nimport { createAxios, getTokenFromLocalStorage } from '../../Hooks/UseAxios'\r\nimport Table from 'react-bootstrap/Table'\r\nimport styled from 'styled-components/macro'\r\nimport 'react-pro-sidebar/dist/css/styles.css'\r\nimport Form from 'react-bootstrap/Form'\r\nimport axios from 'axios'\r\n\r\nconst ErrorBox = styled.div`\r\n  height: 30px;\r\n  margin: 1rem 0;\r\n  /* border: 1px solid red; */\r\n  color: red;\r\n  width: 100%;\r\n  padding: 2px 0;\r\n  text-align: center;\r\n`\r\n\r\nconst Container = styled.section`\r\n  /* border: 1px solid olive; */\r\n  max-width: 1000px;\r\n  margin: 0 auto;\r\n  box-sizing: border-box;\r\n  margin-top: 5rem;\r\n  min-height:82vh ;\r\n`\r\n\r\nconst Footer = styled.footer`\r\n  background-color: #212529;\r\n  height: 3.6vh;\r\n`\r\n\r\nexport default function AddMovieForm() {\r\n  const navigate = useNavigate()\r\n  const token = getTokenFromLocalStorage()\r\n  const [error, setError] = useState(false)\r\n  const [errorMessage, setErrorMessage] = useState('')\r\n\r\n  //check user role\r\n  const user = localStorage.getItem('user')\r\n  const parsedUser = JSON.parse(user)\r\n  const userRole = parsedUser?.roles[0]\r\n  useEffect(() => {\r\n    if (!user || userRole !== 'ROLE_ADMIN') {\r\n      navigate('/')\r\n    }\r\n  }, [userRole])\r\n\r\n  const [movie, setMovie] = useState({\r\n    movieName: '',\r\n    theatreName: '',\r\n    noOfTicketsAvailable: 0,\r\n    ticketsStatus: ''\r\n  });\r\n\r\n  // const handleChange = (e) => {\r\n  //   const {movieName, value} = e.target;\r\n  //   setMovie((prevMovie) => ({...prevMovie, [movieName]: value}));\r\n  // };\r\n\r\n  // const onChange = (e) => {\r\n  //   const {movieName, value} = e.target;\r\n  //   setError(false)\r\n  //   setMovie((prevMovie) => ({\r\n  //     ...prevMovie,\r\n  //     [movieName]: value,\r\n  //   }))\r\n  // };\r\n  const onChange = (e) => {\r\n    setError(false)\r\n    setMovie((prevMovie) => ({\r\n      ...prevMovie,\r\n      [e.target.id]: e.target.value,\r\n    }))\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    \r\n    axios\r\n      .post('https://movieapp-danish.azurewebsites.net/savemovie', movie)\r\n      .then((response) => {\r\n        console.log(response.data);\r\n        alert(\"Movie Added!!!\");\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      })\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <NavbarComp />\r\n      <Container>\r\n      <h2 className='mt-5'>Add Movie</h2>\r\n        <form className='row g-3 mt-5' noValidate>\r\n          <div className='col-md-6'>\r\n            <label htmlFor='movieName' className='form-label'>\r\n              Movie Name\r\n            </label>\r\n            <input\r\n              type='text'\r\n              className='form-control'\r\n              id='movieName'\r\n              onChange={onChange}\r\n              required\r\n            />\r\n            <div className='valid-feedback'>Looks good!</div>\r\n          </div>\r\n          <div className='col-md-6'>\r\n            <label htmlFor='theatreName' className='form-label'>\r\n              Theatre Name\r\n            </label>\r\n            <input\r\n              type='text'\r\n              className='form-control'\r\n              id='theatreName'\r\n              onChange={onChange}\r\n              required\r\n            />\r\n          </div>\r\n          <div className='col-md-6'>\r\n            <label htmlFor='noOfTicketsAvailable' className='form-label'>\r\n              Number Of Tickets Available\r\n            </label>\r\n            <input\r\n              type='text'\r\n              className='form-control'\r\n              id='noOfTicketsAvailable'\r\n              onChange={onChange}\r\n              required\r\n            />\r\n          </div>\r\n          <div className='col-md-6'>\r\n            <label htmlFor='ticketsStatus' className='form-label'>\r\n              Tickets Status\r\n            </label>\r\n            <input\r\n              type='text'\r\n              className='form-control'\r\n              id='ticketsStatus'\r\n              onChange={onChange}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <ErrorBox>{error && errorMessage}</ErrorBox>\r\n          <div className='col-12'>\r\n            <button\r\n              type='submit'\r\n              className='btn btn-primary'\r\n              onClick={handleSubmit}\r\n            >\r\n              Add Movie\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </Container>\r\n      <Footer></Footer>\r\n    </>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}