{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/LENOVO/Downloads/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/LENOVO/Downloads/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _styled from\"styled-components\";import React,{useEffect}from'react';import NavbarComp from'../Navbar/NavbarComp';import{useNavigate}from'react-router-dom';import{createAxios}from'../../Hooks/UseAxios';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Container=_styled.section.withConfig({displayName:\"UserDashboard__Container\",componentId:\"sc-y0ul4s-0\"})([\"margin:0 auto;box-sizing:border-box;height:90vh;box-sizing:border-box;display:flex;justify-content:center;img{width:90%;}@media (max-width:500px){align-items:center;img{max-width:380px;}}\"]);export default function UserDashboard(){var navigate=useNavigate();//check user role\nvar user=localStorage.getItem('user');var parsedUser=JSON.parse(user);console.log(parsedUser);var roles=parsedUser===null||parsedUser===void 0?void 0:parsedUser.roles[0];useEffect(function(){if(!user||roles!=='ROLE_USER'){navigate('/');}},[roles]);var fetchAdminData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var accessToken,apiUrl,authAxios,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:accessToken=parsedUser===null||parsedUser===void 0?void 0:parsedUser.accessToken;//console.log(accessToken)\n//const apiUrl = 'http://localhost:8081/api/v1.0/moviebooking'\napiUrl='https://movieapp-danish.azurewebsites.net';authAxios=createAxios(apiUrl,accessToken);_context.next=5;return authAxios.get('/forUser',{validateStatus:function validateStatus(status){return status<500;}});case 5:data=_context.sent;case 6:case\"end\":return _context.stop();}}},_callee);}));return function fetchAdminData(){return _ref.apply(this,arguments);};}();useEffect(function(){if(user&&roles==='ROLE_USER')fetchAdminData();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NavbarComp,{}),/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(\"img\",{src:\"userdashboard.png\",alt:\"logo\"})})]});}","map":{"version":3,"names":["React","useEffect","NavbarComp","useNavigate","createAxios","Container","styled","section","UserDashboard","navigate","user","localStorage","getItem","parsedUser","JSON","parse","console","log","roles","fetchAdminData","accessToken","apiUrl","authAxios","get","validateStatus","status","data"],"sources":["C:/Users/LENOVO/Downloads/frontend/src/Components/User/UserDashboard.js"],"sourcesContent":["import React, { useEffect } from 'react'\r\nimport NavbarComp from '../Navbar/NavbarComp'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { createAxios } from '../../Hooks/UseAxios'\r\nimport styled from 'styled-components/macro'\r\n\r\nconst Container = styled.section`\r\n  /* border: 1px solid olive; */\r\n  /* max-width: 1000px; */\r\n  margin: 0 auto;\r\n  box-sizing: border-box;\r\n\r\n  height: 90vh;\r\n  box-sizing: border-box;\r\n  /* background: rgb(248, 249, 255); */\r\n  display: flex;\r\n  justify-content: center;\r\n\r\n  img {\r\n    width: 90%;\r\n    /* height: 80%; */\r\n    /* max-width: 1100px; */\r\n  }\r\n\r\n  @media (max-width: 500px) {\r\n    align-items: center;\r\n    img {\r\n      max-width: 380px;\r\n      /* max-height: 50%; */\r\n    }\r\n  }\r\n`\r\n\r\nexport default function UserDashboard() {\r\n  const navigate = useNavigate()\r\n\r\n  //check user role\r\n  const user = localStorage.getItem('user')\r\n  const parsedUser = JSON.parse(user)\r\n  console.log(parsedUser)\r\n  const roles = parsedUser?.roles[0]\r\n  useEffect(() => {\r\n    if (!user || roles !== 'ROLE_USER') {\r\n      navigate('/')\r\n    }\r\n  }, [roles])\r\n\r\n  const fetchAdminData = async () => {\r\n    const accessToken = parsedUser?.accessToken\r\n    //console.log(accessToken)\r\n    //const apiUrl = 'http://localhost:8081/api/v1.0/moviebooking'\r\n    const apiUrl = 'https://movieapp-danish.azurewebsites.net'\r\n    const authAxios = createAxios(apiUrl, accessToken)\r\n\r\n\r\n    const data = await authAxios.get('/forUser',{\r\n      validateStatus: function(status){\r\n        return status<500;\r\n      }\r\n    })\r\n\r\n    // console.log(data)\r\n  }\r\n  useEffect(() => {\r\n    if (user && roles === 'ROLE_USER') fetchAdminData()\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n      <NavbarComp />\r\n      <Container>\r\n        <img src='userdashboard.png' alt='logo' />\r\n      </Container>\r\n    </>\r\n  )\r\n}\r\n"],"mappings":"uSAAA,MAAOA,MAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,WAAP,KAAuB,sBAAvB,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,WAAT,KAA4B,sBAA5B,C,6IAGA,GAAMC,UAAS,CAAGC,OAAM,CAACC,OAAV,gRAAf,CA2BA,cAAe,SAASC,cAAT,EAAyB,CACtC,GAAMC,SAAQ,CAAGN,WAAW,EAA5B,CAEA;AACA,GAAMO,KAAI,CAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAb,CACA,GAAMC,WAAU,CAAGC,IAAI,CAACC,KAAL,CAAWL,IAAX,CAAnB,CACAM,OAAO,CAACC,GAAR,CAAYJ,UAAZ,EACA,GAAMK,MAAK,CAAGL,UAAH,SAAGA,UAAH,iBAAGA,UAAU,CAAEK,KAAZ,CAAkB,CAAlB,CAAd,CACAjB,SAAS,CAAC,UAAM,CACd,GAAI,CAACS,IAAD,EAASQ,KAAK,GAAK,WAAvB,CAAoC,CAClCT,QAAQ,CAAC,GAAD,CAAR,CACD,CACF,CAJQ,CAIN,CAACS,KAAD,CAJM,CAAT,CAMA,GAAMC,eAAc,4FAAG,2KACfC,WADe,CACDP,UADC,SACDA,UADC,iBACDA,UAAU,CAAEO,WADX,CAErB;AACA;AACMC,MAJe,CAIN,2CAJM,CAKfC,SALe,CAKHlB,WAAW,CAACiB,MAAD,CAASD,WAAT,CALR,uBAQFE,UAAS,CAACC,GAAV,CAAc,UAAd,CAAyB,CAC1CC,cAAc,CAAE,wBAASC,MAAT,CAAgB,CAC9B,MAAOA,OAAM,CAAC,GAAd,CACD,CAHyC,CAAzB,CARE,QAQfC,IARe,qEAAH,kBAAdP,eAAc,0CAApB,CAgBAlB,SAAS,CAAC,UAAM,CACd,GAAIS,IAAI,EAAIQ,KAAK,GAAK,WAAtB,CAAmCC,cAAc,GAClD,CAFQ,CAEN,EAFM,CAAT,CAIA,mBACE,wCACE,KAAC,UAAD,IADF,cAEE,KAAC,SAAD,wBACE,YAAK,GAAG,CAAC,mBAAT,CAA6B,GAAG,CAAC,MAAjC,EADF,EAFF,GADF,CAQD"},"metadata":{},"sourceType":"module"}