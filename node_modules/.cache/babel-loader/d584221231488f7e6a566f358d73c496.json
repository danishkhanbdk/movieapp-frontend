{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/LENOVO/Downloads/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/LENOVO/Downloads/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/LENOVO/Downloads/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _styled from\"styled-components\";import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import NavbarComp from'../Navbar/NavbarComp';import{createAxios,getTokenFromLocalStorage}from'../../Hooks/UseAxios';import Table from'react-bootstrap/Table';import'react-pro-sidebar/dist/css/styles.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Container=_styled.section.withConfig({displayName:\"AllMovie__Container\",componentId:\"sc-1q6ioee-0\"})([\"max-width:1000px;margin:0 auto;box-sizing:border-box;margin-top:8rem;\"]);export default function AllMovie(){var navigate=useNavigate();var token=getTokenFromLocalStorage();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];//check user role\nvar user=localStorage.getItem('user');var parsedUser=JSON.parse(user);var userRole=parsedUser===null||parsedUser===void 0?void 0:parsedUser.roles[0];useEffect(function(){if(!user||userRole!=='ROLE_ADMIN'){navigate('/');}},[userRole]);var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),movies=_useState6[0],setMovies=_useState6[1];// useEffect(() => {\n//   fetchMovies();\n// }, []);\nvar fetchMovies=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var accessToken,apiUrl,authAxios,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://  try {\n//   const response = await axios.get('http://localhost:8081/api/v1.0/moviebooking/all')\n//   setMovies(response.data?.data);\n//  } catch(error){\n//   console.log(error);\n//  }\naccessToken=parsedUser===null||parsedUser===void 0?void 0:parsedUser.accessToken;//console.log(accessToken)\napiUrl='https://movieapp-danish.azurewebsites.net/';authAxios=createAxios(apiUrl,accessToken);_context.next=5;return authAxios.get('/all',{validateStatus:function validateStatus(status){return status<500;}});case 5:response=_context.sent;setMovies(response.data);case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchMovies(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchMovies();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NavbarComp,{}),/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,variant:\"light\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Movie Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Theatre Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Number Of Tickets Available\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Tickets Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:movies===null||movies===void 0?void 0:movies.map(function(item,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.movieName}),/*#__PURE__*/_jsx(\"td\",{children:item.theatreName}),/*#__PURE__*/_jsx(\"td\",{children:item.noOfTicketsAvailable}),/*#__PURE__*/_jsx(\"td\",{children:item.ticketsStatus})]},index);})})]})})]});}","map":{"version":3,"names":["React","useEffect","useState","useNavigate","NavbarComp","createAxios","getTokenFromLocalStorage","Table","Container","styled","section","AllMovie","navigate","token","error","setError","errorMessage","setErrorMessage","user","localStorage","getItem","parsedUser","JSON","parse","userRole","roles","movies","setMovies","fetchMovies","accessToken","apiUrl","authAxios","get","validateStatus","status","response","data","map","item","index","movieName","theatreName","noOfTicketsAvailable","ticketsStatus"],"sources":["C:/Users/LENOVO/Downloads/frontend/src/Components/Admin/AllMovie.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport NavbarComp from '../Navbar/NavbarComp'\r\nimport { createAxios, getTokenFromLocalStorage } from '../../Hooks/UseAxios'\r\nimport Table from 'react-bootstrap/Table'\r\nimport styled from 'styled-components/macro'\r\nimport 'react-pro-sidebar/dist/css/styles.css'\r\n\r\n\r\nconst Container = styled.section`\r\n  /* border: 1px solid olive; */\r\n  max-width: 1000px;\r\n  margin: 0 auto;\r\n  box-sizing: border-box;\r\n  margin-top: 8rem;\r\n`\r\n\r\nexport default function AllMovie() {\r\n  const navigate = useNavigate()\r\n  const token = getTokenFromLocalStorage()\r\n  const [error, setError] = useState(false)\r\n  const [errorMessage, setErrorMessage] = useState('')\r\n\r\n  //check user role\r\n  const user = localStorage.getItem('user')\r\n  const parsedUser = JSON.parse(user)\r\n  const userRole = parsedUser?.roles[0]\r\n  useEffect(() => {\r\n    if (!user || userRole !== 'ROLE_ADMIN') {\r\n      navigate('/')\r\n    }\r\n  }, [userRole])\r\n\r\n  const [movies, setMovies] = useState([]);\r\n\r\n  // useEffect(() => {\r\n  //   fetchMovies();\r\n  // }, []);\r\n\r\n  const fetchMovies = async () => {\r\n  //  try {\r\n  //   const response = await axios.get('http://localhost:8081/api/v1.0/moviebooking/all')\r\n  //   setMovies(response.data?.data);\r\n  //  } catch(error){\r\n  //   console.log(error);\r\n  //  }\r\n   const accessToken = parsedUser?.accessToken\r\n    //console.log(accessToken)\r\n    const apiUrl = 'https://movieapp-danish.azurewebsites.net/'\r\n    const authAxios = createAxios(apiUrl, accessToken)\r\n\r\n\r\n    const response = await authAxios.get('/all', {\r\n      validateStatus: function(status){\r\n        return status<500;\r\n      }\r\n    })\r\n      setMovies(response.data);\r\n  };\r\n\r\n  useEffect(() => {\r\n     fetchMovies()\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n      <NavbarComp />\r\n      <Container>\r\n        <Table striped bordered hover variant='light'>\r\n          <thead>\r\n            <tr>\r\n              <th>Movie Name</th>\r\n              <th>Theatre Name</th>\r\n              <th>Number Of Tickets Available</th>\r\n              <th>Tickets Status</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {movies?.map((item,index) => {\r\n              return (\r\n                <tr key={index}>\r\n                  <td>{item.movieName}</td>\r\n                  <td>{item.theatreName}</td>\r\n                  <td>{item.noOfTicketsAvailable}</td>\r\n                  <td>{item.ticketsStatus}</td>\r\n                </tr>\r\n              )\r\n            })}\r\n          </tbody>\r\n        </Table>\r\n      \r\n      </Container>\r\n    </>\r\n  )\r\n}\r\n"],"mappings":"+ZAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,WAAP,KAAuB,sBAAvB,CACA,OAASC,WAAT,CAAsBC,wBAAtB,KAAsD,sBAAtD,CACA,MAAOC,MAAP,KAAkB,uBAAlB,CAEA,MAAO,uCAAP,C,6IAGA,GAAMC,UAAS,CAAGC,OAAM,CAACC,OAAV,sJAAf,CAQA,cAAe,SAASC,SAAT,EAAoB,CACjC,GAAMC,SAAQ,CAAGT,WAAW,EAA5B,CACA,GAAMU,MAAK,CAAGP,wBAAwB,EAAtC,CACA,cAA0BJ,QAAQ,CAAC,KAAD,CAAlC,wCAAOY,KAAP,eAAcC,QAAd,eACA,eAAwCb,QAAQ,CAAC,EAAD,CAAhD,yCAAOc,YAAP,eAAqBC,eAArB,eAEA;AACA,GAAMC,KAAI,CAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAb,CACA,GAAMC,WAAU,CAAGC,IAAI,CAACC,KAAL,CAAWL,IAAX,CAAnB,CACA,GAAMM,SAAQ,CAAGH,UAAH,SAAGA,UAAH,iBAAGA,UAAU,CAAEI,KAAZ,CAAkB,CAAlB,CAAjB,CACAxB,SAAS,CAAC,UAAM,CACd,GAAI,CAACiB,IAAD,EAASM,QAAQ,GAAK,YAA1B,CAAwC,CACtCZ,QAAQ,CAAC,GAAD,CAAR,CACD,CACF,CAJQ,CAIN,CAACY,QAAD,CAJM,CAAT,CAMA,eAA4BtB,QAAQ,CAAC,EAAD,CAApC,yCAAOwB,MAAP,eAAeC,SAAf,eAEA;AACA;AACA;AAEA,GAAMC,YAAW,4FAAG,+KACpB;AACA;AACA;AACA;AACA;AACA;AACOC,WAPa,CAOCR,UAPD,SAOCA,UAPD,iBAOCA,UAAU,CAAEQ,WAPb,CAQlB;AACMC,MATY,CASH,4CATG,CAUZC,SAVY,CAUA1B,WAAW,CAACyB,MAAD,CAASD,WAAT,CAVX,uBAaKE,UAAS,CAACC,GAAV,CAAc,MAAd,CAAsB,CAC3CC,cAAc,CAAE,wBAASC,MAAT,CAAgB,CAC9B,MAAOA,OAAM,CAAC,GAAd,CACD,CAH0C,CAAtB,CAbL,QAaZC,QAbY,eAkBhBR,SAAS,CAACQ,QAAQ,CAACC,IAAV,CAAT,CAlBgB,sDAAH,kBAAXR,YAAW,0CAAjB,CAqBA3B,SAAS,CAAC,UAAM,CACb2B,WAAW,GACb,CAFQ,CAEN,EAFM,CAAT,CAIA,mBACE,wCACE,KAAC,UAAD,IADF,cAEE,KAAC,SAAD,wBACE,MAAC,KAAD,EAAO,OAAO,KAAd,CAAe,QAAQ,KAAvB,CAAwB,KAAK,KAA7B,CAA8B,OAAO,CAAC,OAAtC,wBACE,oCACE,mCACE,kCADF,cAEE,oCAFF,cAGE,mDAHF,cAIE,sCAJF,GADF,EADF,cASE,uBACGF,MADH,SACGA,MADH,iBACGA,MAAM,CAAEW,GAAR,CAAY,SAACC,IAAD,CAAMC,KAAN,CAAgB,CAC3B,mBACE,mCACE,oBAAKD,IAAI,CAACE,SAAV,EADF,cAEE,oBAAKF,IAAI,CAACG,WAAV,EAFF,cAGE,oBAAKH,IAAI,CAACI,oBAAV,EAHF,cAIE,oBAAKJ,IAAI,CAACK,aAAV,EAJF,GAASJ,KAAT,CADF,CAQD,CATA,CADH,EATF,GADF,EAFF,GADF,CA8BD"},"metadata":{},"sourceType":"module"}